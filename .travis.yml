# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: r8e/HERgg2l0tadsf/OpuIzMIQ4EFwvk8a2J0hKb2knkcy4ynzpb3JFDiKSbVbqUO+oA85NrVL7gvPYx8t6kNvZVhcBz/UP7wahO01xS22tEfLeiv8RD48xBYnPJeuLLxZnHkbsBTJvKa9dSO2bg3o+EZdfj4X1j+ddYs6NIZcuAaxX3cl11iexpbE8p+MuYcy5Lo691M8TyVRjzK047p7a7aXGH8nukE4GBrQkwugmP6SmokuBGnmeW2O5atS+Vrz7MMQsP2vPTrGjJcQeeAK5T2Nhk0oV7SC+iSJMy21aGmNo9dwEtqXONaMpyrOgfesJ7sph1HqlVQ+zcpmgLcaXDO32ymVSjQ5BVy5bOYQy3agvzEYFGYRqGbM/mtqtmjwS9nqJjIm6raO5V3QdNMmhDLvkTvEy5vPJWE/Et/oqWutaGHfI0kJoMbsih7sg6T2zp7Bu9qfREdN/O4KErbRFtrTsWtbcmEa/PpjHpca9KEmubl2O1yl1cESeQr1IDDLkjXADLfXrREPR5hZB75fXwn+g9NxAZgDchCz0ximPeEeorEYbCPBHZ9yAuk5oruvfMSE2m3EkttzV7ARsmJ5kRwnBKeltwlV/hRzUOWU76xF3X6gEzFE1bpNM8zeSyMEz1unorXqGoppimQ8zF0ZWq6a8qRo24PvxgVq531IE=
  - secure: 2zO7GWJIGzo4uhoVDvdbJkpF3Dd1kOYL3gPW54csZUovveNnl+s/gXn9iRWrpDDnAcJ+SIz4WdSwCRu2TG6ObJtkNLu3xWkSU6ra8IeTJToaAy0s0udFw2cFF1kfK0u2/8DavncGJ+i3E/uxjTz3+m1AVJGoH+HNWn+ZbUbqvTlyXCRsp9laGFTEeRIltPyjBevFiumHe1cMI3wKdJBoqCCgZsAOL3Zws85wA5ndNcmQbwHOofs+1QlYxe21YkLhFlqLCuoFn1RgxW6T5FDP1baSTSEiIYOoz+2JIDbeG0KVBET4G+vMhhKb4Cx4bKXxVx5SoT/1Z5V5kAFO2F8eZr554z6jYbGR9TaFqfB36LzNq+cREpvCVuep/xr1YkJKzcjFw6qeHHOYV5l6M90KKJDZ1LFsQO8aycjgUfhvb6jwUQt3DYHlC8C/brcHRd1qG9fXteNDFchvI7WnQapWYrqyWtkZsfxPO59FIFCOLsYq5M21ONr9sZCcqEbKELzkOVblbywIGEgaMFg6/ws1McYtdf+qWRRYkCnP0ACrSZkhhlQUZrpMCdyJt7SbFogbXGI5ehG9+PIMiQucPclImtnDQzBBeh/4FY+inj0RvuDBXWvPJl0FAlFMiEfmNfh4Lq3RFleBaTyT/bFmciT7qFaJUkgXAYYy7hgBSqB0UJA=
  - secure: MaHK/u1sDBhXufOCFQM4+kwxGF1wLodDV3bneicoWAENU1zkpA6BN+hB3CnJD8/sNX6ppvZyzUh16Ol/tlcVyRICD1No9xCgwy2EK72BO8bwfYSd7Cp58yKcYsTD1lo3fmEgVQeJMcuQ0DgrOBPML6yJNhmGx8JS5OlRIdeTWZAttTxyP9MjZGLfrXSKZWZiwYTmZ0smTB+oeVkBia5gdn7+umnJa5JVobhC/xhcoG4+xV6IV+mJwh5aMTdEL8gJXOMw/o2hE3qaVuy3oSDwmCU++MViJbeDV6rOG7xweiGRD2Sq/Ucv7O0NVU22ped1/SNRji03d7bOJrOP0E5lHkG4HzGEY8R5f/0uNA5KXnm9kODyZ5Hsv84tejla+UTQiLn1MaiTOi+6lypc1uzV8Wi5azkimBnCtPOUC6OAnnoaH2TItGFlfJ4SXc65Qb5zHcgFRFR5NJxrzoVJN+BKMdDo11mvVTDrHAfnkGIOYiM8Inqr2PzFRtNm3ELymgczYFCNhAi8yD6qpbCgmeHH8WnNvSR5Jhd7bikeuvZiVtUwsvNY4/qIVUHWHDyWwiUYsj3uBlxPSa6qDU0ghVNTF37BUlbU5CqskjvMiMcNghHpLSKGLcwZWpwKQGMblLqAI+VQYtGaM7+BB8Vkl9q5qSpiFddute+31C5w+I+MF+A=
  - secure: q4GZ6TbrSYO1LENWc/H+FEyVQwjOK3w/RllQPnap5Lk5tkmytiA5Es7Bwb/0vyh6lQp8T+vLue5xyIJuQbJN6ISPpDi0tuDUcnSMtLuCtQuBj9vlYr8bgUl3yNSMAVgbfjMrf025h7sq9K0rc8JRyg1MuEU8Bl38CAcXtx8+QibOghPXa72DunmpwcL/Bo62CGkt3Up3ZYNgARLeEw7PgI6Et3yIpJ4jcL2dQSa1hMPAlRSmdOT8mo1+R+gSl6/JsyO+HRSeNTgxIswGfYHMizCV0NG4pCUDEvJr2no+nWhml4xwjxyPspfsXdwafF+PRvDvSd77NbJutAFKXdh76cM/gPbF7qFwO11CnpEAjxCb7gl4ky0tQ3BLXBdtAFUzESK4Zr5ZComMqgFT013owPmlh1NzrKO09d6P9Ko/Tog8rNQ3SWI1F8u+fZwh5wwRuJO430Yt5sA1M5pW7WeVNMq0VlJ0ALB/894O3RUcPDq/XWAjnAasw65HZmMWPPqv+16OJNEazNL/eCOtRMc1F+JATDzX9MI+4RGViMAunKDUYGdi+OjiqSnJb3NDBOkqIinEc0ggXScsNzKXKMUUG/5R/lhAqm0ZiRaJUKGiWlICKM36IiVZrgm3RR/huFBf+laeurkKkw/pIPdoUSkBUyqxFNFQFH1Yb5yVFIEutl0=
  - secure: XmGIkg5tTRkQOKZxAUZ20S4BMD1GVtoVU8NJWNdCbuOB6v6iD7asErRkFwDqWFTk780rUvkORfzksTGwB7obfCjvn21+NujTFUolLlVgEer8bqZYe9aF8h7US3o6Pxjb6r3ZyCefklljeNtv7vGk1qcrOZ+YY1YyVQDCFl3htIw3U4/4dHWJYiExu+dfOlQIjGBLx52xNinYcFXKNR/1eyhZNtqAs3Aa0hh/DqtMmycw7s8arth95mm1/hELhVQjExd35Qhy1/kwLBkr+fY9Bt6waSsRY92kzg8vz7AcXUFJdHUl9mKx6qjXdDtJoPdSPRcDNTWnV0Hr7MBKd4G1P33laXBMYIAKWlsTx6ey9RQH55rT9F8WNPwpE9i3Avk/nRuSs/ZewFQ8XD7oW2VzR/rKkjpopFAv/o+UX68ZyOnGkVDQ17s2j30zXKhcR0PprF0L/d6gllPSMRxWLG8S4vU/pLjR7K5+rbG8f0Wck1T2OWYxje7Pc/ZwwZGE3bK5j6zJ+drhu7np3AZdl+dBPtK2VGFGBzWM+g6xBJiD6L4LxE5wQAbPI0R6/v/9SOvDACnmOmv9ndxtvILFiiFjzO6yQKeP0fQSh4Qvb0w0BVm/XyXH4U7Xd3ZRCqABzbVNSB/f13Wyqy4iWMf9gewyWj817uTFz+M2zJ8j5WeJfVM=
  - secure: dCDHWrR15hISgC76oF1nnX1P2ZUeH/H3rMUgVl+w5JlevyD8PA7HOelbIDiTwJkoEUIhliETaRcQgUQdqkchaRVI1gVz8WeagS6dTGpDHZDS6BaQ1MoVu2yW2dSIMowN4FwdC6Hy29A19hLdVjb756NIRijyvZCJYokyeaF2Bj8jg2ASRn/xKU7k+7GYzzCOIiGEbs1IRzFpu4oVhw8DpBFnIwPjhblm1xaANVOls/mtmWpYW6feem4X42FFU/0daOAxZvQDpkTKp4gHr9ogHZRljqawT/9m4a2THh/ahUN5yYFz27+XDBnmz4ltsOoT2nyAxunkhVLqLAPq9KGgqw12F9a/zUsSHSAKxISkzPTIr6wkwLnTh2i+bzgeqEa5nOahrMM04A2ONmmm6/1Mdn8TC7J5CD5b34YdterfvCCBUAZqf1crNDTJGj45U1IpWH4eON65FGnpUD9NwqwjPmy4drQsaYzBReyCriKCYg4GdG1icD8EN+Miu5QaKqjydDxaSuJA5HQS5NkRz/8mS+dgrPdagllXK3jmeWyTBwu6xGsslI9SxsRobz467GIn0F22hZDy/raIos/pE3+fSvwyTdu9Jx66PewIyW8QpMsqEdlJwfj1dmgCTPGs9qXTdi1a4/JYtVschS1QPa7NKV7MALjry1+mLY0BpXyt9hk=
  - secure: WamjkCEUalfTLSxlZqaDJTTm8sL6HYs9Ze1ByskglIoU5MDp+/nWQ4G+wTKaKgQpAvhoUUV2aGYd+KtWYYbJocWtLrieyPakK5ZTZKkvw5RX/k/M9wlY11ZCNe7wuHGSsN9B5yEB2LnvVy2RFWjKbDssdD3lUr2PErMr4FB+QUMMd6ozDJv7/qL/6aS/SLzgZjC5lngxlM/B+fCIw+l63l7kRgCT83EO0X5cHddIhmnyXRcrirEPxPaW7ZJlVIa8rlgXmS3+BsSTyDR/Zi1GHWU6TqSp282U1fzTaqXJyJL4CaHxShp9yl5VY2Arg1S9toIfta31kLobHDm17jLyKkK351YdYGui1LhrYniXeKrpymR/z2+LFLmzVEuWDGCpxtjDzliER98oWCyiw5NpKdXSLWAEdNDDSe/1aF5aw1TEW90Y7r78vMdxxkklJ7p7X89oYPdjh3i/AlFzYseiMAg8nd3gWBf40vYocGEf9R6gUK5OjDjrRcYNMvNO6oZfnTlMYVLel+ZgB3V9pTga9CfQRUd7zeikGD4v0BUzNffWrQYTUXfXUcwAwQY/LU91C8/BhoMMFMxP+uQbfzeVG1SrCX2etkzL4PyFLgI5Qnx+IP1cMLr91zJfy3+GJmefZsSzRQtj0KAGzECMSbU0i8u8nfO/3XvAYnz8NmxX4Uo=
